---
import { astroI18n, createGetStaticPaths } from 'astro-i18n';
import { getCollection } from 'astro:content';

// export const getStaticPaths = createStaticPaths(
//   async ({ langCode }) => {
//     const articles = await getCollection('blogs', ({ data }) => {
//       return data.lang === langCode;
//     });
//     return articles.map(article => ({
//       params: { slug: article.data.permalink },
//       props: { article },
//     }));
//   },
//   import.meta.url,
// );

type Blogs = Awaited<ReturnType<typeof getCollection>>;

export const getStaticPaths = createGetStaticPaths(async props => {
  const blogs = await getCollection('blogs', ({ data }) => {
    return data.lang === astroI18n.locale && !data.draft;
  });

  return blogs.map(blog => ({
    params: { slug: blog.data.permalink },
    props: { article: blog },
  }));
});

const { article } = Astro.props as {
  article: Blogs[number];
};
const { Content, headings } = await article.render();
---

<div>
  <Content />
</div>
<!-- <BaseLayout pageTitle={article.data.title}>
  <EditorialContent content={article} />
</BaseLayout> -->
